#!/usr/bin/env bash
set -u

source bin/lib/helpers.sh

start "Linux tests"
job_output=$(./bin/test-linux 2>&1)
result $?

start "Windows tests"
job_output=$(./bin/test-windows 2>&1)
result $?

start "Browser tests"
job_output=$(./bin/test-web 2>&1)
result $?

start "CLI tests"
job_output=$(./bin/test-cli 2>&1)
result $?

start "Documentation check"
job_output=$(.buildkite/scripts/tests/check_for_documentation.rb 2>&1)
result $?

start "Ruby - Formatting"
job_output=$(dx/exec bundle exec standardrb 2>&1)
result $?

start "CPP - Formatting"
job_output=$(dx/exec bundle exec rake format:check 2>&1)
result $?

start "CPP - Linting"
job_output=$(dx/exec bundle exec rake lint:check 2>&1)
result $?
